# APSIM Random-Forest Emulator & Figure Examples

This repository provides example R scripts for building a random-forest emulator of APSIM crop yield outputs and for generating diagnostic and impact figures. The script `rf_emulator_apsim.R` illustrates how to load APSIM simulation outputs, tune random-forest hyperparameters (e.g. `mtry`, `num.trees`) using out-of-bag RMSE, fit a final emulator, and apply it to new predictor inputs such as multi-GCM climate scenarios. The script `figure_plot.R` shows how to visualise emulator performance (tuning curves for RÂ² and RMSE, APSIM vs emulator scatter plots, and variable-importance bar plots) and how to map spatial patterns and distributions of extreme climate indices and crop yield changes. These scripts are intended as examples; users should adapt file paths, variable names, and plotting options to their own projects. the APSIM output data used in this example are available from Zenodo (https://zenodo.org/records/7444483), and the five downscaled GCM input datasets can be obtained from the ISIMIP portal (https://www.isimip.org/). The updated implementation of the crop-calendar model as an R package is openly available at https://github.com/AgMIP-GGCMI/cropCalendars.

